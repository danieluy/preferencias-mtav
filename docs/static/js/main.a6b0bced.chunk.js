(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,n,t){e.exports=t(320)},143:function(e,n,t){},292:function(e,n,t){},320:function(e,n,t){"use strict";t.r(n);var a,r=t(0),i=t.n(r),o=t(25),c=t.n(o),l=(t(143),t(14)),s=t(16),u=t(20),m=t(23),d=t(21),p=t(24),f=t(22),b=t(57),h=t(47),E={units:{d2:[101,102,104,105,106,107,201,202,204,205,206,207,301,302,304,305,306,307,401,402,404,405,406,407,501,502,503,601,602,603,701,702,703,801,802,803,901,902,903,1001,1002,1003],d3:[103,203,303,403],d4:[],total:46}},O=Object(h.a)({},E),y=function e(n,t,a){Object(s.a)(this,e),this.id=n,this.dorms="d".concat(t),this.priority=a||0===a?a:-1},v=function e(n,t,a){Object(s.a)(this,e),this.id=n,this.dorms="d".concat(t),this.unit=a},g={family:{id:"",name:"",dorms:0},familyForm:{complete:!0,open:!1},units:(a=O.units,{d2:a.d2.map(function(e){return new y(e,2)}),d2Priorities:a.d2.map(function(e,n){return new v(n,2)}),d3:a.d3.map(function(e){return new y(e,3)}),d3Priorities:a.d3.map(function(e,n){return new v(n,3)}),d4:a.d4.map(function(e){return new y(e,4)}),d4Priorities:a.d4.map(function(e,n){return new v(n,4)}),total:a.total,valid:j(a)}),openTab:0,unsavedChanges:!1};function j(e){return e.d2.length+e.d3.length+e.d4.length===e.total?{status:!0,message:null}:{status:!1,message:"La cantidad de apartamentos no coincide con el total declarado."}}var T={INIT_APP_STATE:function(e){var n=function(){try{var e=JSON.parse(localStorage.getItem("FULL_STATE"));return Object.assign(g,e)}catch(n){return console.error(n),g}}(),t=_(e=Object(h.a)({},n)),a=!t;return e.familyForm=Object.assign({},e.familyForm,{complete:t,open:a}),e},PATCH_FAMILY:function(e,n){e.family=Object.assign({},e.family,n);var t=_(e);return e.familyForm=Object.assign({},e.familyForm,{complete:t}),e.unsavedChanges=!0,A(e.unsavedChanges),e},FAMILY_FORM_OPEN:function(e,n){return e.familyForm=Object.assign({},e.familyForm,{open:n}),e},UNIT_PRIORITY_CHANGE:function(e,n){var t,a,r=n.unit,i=n.priority,o=e.units[r.dorms].map(function(e){return e.id===r.id?((a=new y(r.id,null,i)).dorms=r.dorms,a):e}),c=e.units["".concat(a.dorms,"Priorities")].map(function(e){if(e.id===i){var n=new v(e.id,null,a);return n.dorms=e.dorms,n}return e});return e.units=Object.assign({},e.units,(t={},Object(l.a)(t,r.dorms,o),Object(l.a)(t,"".concat(r.dorms,"Priorities"),c),t)),e.unsavedChanges=!0,A(e.unsavedChanges),e},RELEASE_PRIORITY:function(e,n){var t,a=e.units[n.dorms].map(function(e){if(e.id===n.id){var t=new y(n.id,null,-1);return t.dorms=n.dorms,t}return e}),r=e.units["".concat(n.dorms,"Priorities")].map(function(e){if(e.id===n.priority){var t=new v(e.id,null,null);return t.dorms=e.dorms,t}return e});return e.units=Object.assign({},e.units,(t={},Object(l.a)(t,n.dorms,a),Object(l.a)(t,"".concat(n.dorms,"Priorities"),r),t)),e.unsavedChanges=!0,A(e.unsavedChanges),e},IMPORT_FAMILY_DATA:function(e,n){return(e=Object(h.a)({},e,n,{familyForm:{complete:!0,open:!0}})).unsavedChanges=!0,A(e.unsavedChanges),e},OPEN_TAB_CHANGED:function(e,n){return e.openTab=n,e},SAVE_FULL_STATE:function(e){return window.localStorage.setItem("FULL_STATE",JSON.stringify(e)),e.unsavedChanges=!1,A(e.unsavedChanges),e}};function _(e){return!!(e.family.id&&e.family.name&&e.family.dorms)}var w=!1;function A(e){e&&!w?(window.addEventListener("beforeunload",C),w=!0):w&&(window.removeEventListener("beforeunload",C),w=!1)}function C(e){return e.preventDefault(),e.returnValue="","Hay cambios sin guardar, cerrar?"}var N=Object(b.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=arguments.length>1?arguments[1]:void 0,t=T[n.type];return t?t(Object.assign({},e),n.payload):e},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),I={INIT_APP_STATE:"INIT_APP_STATE",PATCH_FAMILY:"PATCH_FAMILY",FAMILY_FORM_OPEN:"FAMILY_FORM_OPEN",UNIT_PRIORITY_CHANGE:"UNIT_PRIORITY_CHANGE",RELEASE_PRIORITY:"RELEASE_PRIORITY",IMPORT_FAMILY_DATA:"IMPORT_FAMILY_DATA",OPEN_TAB_CHANGED:"OPEN_TAB_CHANGED",SAVE_FULL_STATE:"SAVE_FULL_STATE"},P=t(19),F=t(38),S=t.n(F),k=t(46),x=t.n(k),L=t(122),R=t.n(L),M=t(123),D=t.n(M),Y=t(124),U=t.n(Y),H=t(125),G=t.n(H),B=t(127),V=t.n(B),W=t(126),J=t.n(W),X=t(59),z=t.n(X),$=t(60),q=t.n($),K=function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(m.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).save=function(){t.props.onClose()},t}return Object(p.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.classes,t=e.family,a=t.id,r=t.name,o=t.dorms,c=e.open,l=e.complete,s=e.onChange;return i.a.createElement(R.a,{className:"family-wrapper",open:c||!l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(D.a,{id:"alert-dialog-title"},"Familia"),i.a.createElement(U.a,null,i.a.createElement(G.a,{id:"alert-dialog-description"},"Ingrese los datos solicitados."),i.a.createElement(S.a,{id:"id",name:"id",label:"N\xba",value:a,onChange:s,margin:"normal",variant:"outlined",type:"number",fullWidth:!0}),i.a.createElement(S.a,{id:"name",name:"name",label:"Nombre",value:r,onChange:s,margin:"normal",variant:"outlined",fullWidth:!0}),i.a.createElement(J.a,{"aria-label":"Cantidad de dormitorios",name:"dorms",className:n.group,value:o.toString(),onChange:s},i.a.createElement(z.a,{value:"2",control:i.a.createElement(q.a,null),label:"2 dormitorios"}),i.a.createElement(z.a,{value:"3",control:i.a.createElement(q.a,null),label:"3 dormitorios"}),i.a.createElement(z.a,{value:"4",control:i.a.createElement(q.a,null),label:"4 dormitorios",disabled:!0}))),i.a.createElement(V.a,null,i.a.createElement(x.a,{variant:"contained",color:"primary",onClick:this.save,autoFocus:!0},"Cerrar")))}}]),n}(r.PureComponent),Q=Object(P.withStyles)(function(e){return{group:{margin:"".concat(e.spacing.unit,"px 0")}}})(K),Z=Object(f.b)(function(e){var n=e.family,t=e.familyForm,a=t.open,r=t.complete;return{family:n,open:a,complete:r}},function(e){return{onChange:function(n){var t=n.currentTarget.getAttribute("name"),a=n.currentTarget.value,r=Object(l.a)({},t,a);"dorms"===t&&(r.dorms=parseInt(r.dorms,10)),e({type:I.PATCH_FAMILY,payload:r})},onClose:function(){return e({type:I.FAMILY_FORM_OPEN,payload:!1})}}})(Q);var ee=t(18),ne=t.n(ee),te=t(30),ae=t.n(te),re=function(e){function n(){return Object(s.a)(this,n),Object(m.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.classes,t=e.unit,a=e.units,r=e.onChange,o=e.onReset,c=a["".concat(t.dorms,"Priorities")].filter(function(e){return!e.unit}),l=-1!==t.priority;return i.a.createElement("div",{className:n.unit},i.a.createElement(ne.a,{variant:"h6",align:"center",color:"primary"},t.id),l?i.a.createElement(S.a,{label:"Prioridad",variant:"outlined",margin:"normal",value:t.priority+1,className:n.textField,type:"search",onChange:o(t)}):i.a.createElement(S.a,{select:!0,label:"Prioridad",value:-1,onChange:r(t),margin:"normal",variant:"outlined",className:n.textField},c.map(function(e){return i.a.createElement(ae.a,{key:e.id,value:e.id},e.id+1)})))}}]),n}(r.PureComponent),ie=Object(P.withStyles)(function(e){var n,t;return{unit:(n={position:"relative",backgroundSolor:"#FFF",boxShadow:"0 5px 20px -5px rgba(0, 0, 0, .5)",margin:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:10,flexShrink:0,padding:10},Object(l.a)(n,e.breakpoints.down("md"),{width:"100%",height:60,flexDirection:"row",justifyContent:"space-arround"}),Object(l.a)(n,e.breakpoints.up("md"),{width:100,height:100,flexDirection:"column"}),n),textField:(t={},Object(l.a)(t,e.breakpoints.down("md"),{width:"100%",margin:0,marginLeft:10,height:40}),Object(l.a)(t,e.breakpoints.up("md"),{width:80,marginTop:10,marginBottom:0}),t)}})(re),oe=Object(f.b)(function(e){return{units:e.units}},function(e){return{onChange:function(n){return function(t){var a={unit:n,priority:t.target.value};e({type:I.UNIT_PRIORITY_CHANGE,payload:a})}},onReset:function(n){return function(){return e({type:I.RELEASE_PRIORITY,payload:n})}}}})(ie);var ce=function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(m.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={},t}return Object(p.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.classes,t=e.units,a=e.floor;return window.units=t,i.a.createElement("div",{id:"floor-".concat(a),className:n.floor},a>0&&i.a.createElement(ne.a,{variant:"h6",color:"secondary",className:n.title},a/100),t.map(function(e){return i.a.createElement(oe,{key:e.id,unit:e})}))}}]),n}(r.PureComponent),le=Object(P.withStyles)(function(e){var n;return{floor:(n={width:"100%",display:"flex",flexWrap:"wrap"},Object(l.a)(n,e.breakpoints.down("md"),{flexDirection:"column"}),Object(l.a)(n,e.breakpoints.up("md"),{flexDirection:"row"}),n),title:{width:40,height:40,borderRadius:20,display:"flex",justifyContent:"center",alignItems:"center",margin:10,boxShadow:"0 5px 20px -5px rgba(0, 0, 0, .5)"}}})(ce);var se=function(e){function n(){return Object(s.a)(this,n),Object(m.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=(e.classes,e.units),t=e.dorms;if(!t)return i.a.createElement(r.Fragment,null,i.a.createElement(ne.a,{variant:"h6"},"Selecci\xf3n de preferencias"),i.a.createElement(ne.a,null,"No se ha completado la informaci\xf3n necesaria"));var a=function(e){var n=e.slice(),t={};for(;n.length;){var a=n.splice(0,1)[0],r=de(0,100,a.id);t[r]||(t[r]=[]),t[r].push(a)}return t}(n["d".concat(t)]),o=Object.keys(a);return i.a.createElement(r.Fragment,null,o.reverse().map(function(e){return i.a.createElement(le,{key:e,units:a[e],floor:e})}))}}]),n}(r.PureComponent),ue=Object(P.withStyles)(function(e){return{}})(se),me=Object(f.b)(function(e){var n=e.units,t=e.family.dorms;return{units:n,dorms:t}},function(e){return{}})(ue);function de(e,n,t){return t<n?e:de(n,n+100,t)}var pe=t(128),fe=t.n(pe),be=t(129),he=t.n(be),Ee=t(77),Oe=t.n(Ee),ye=t(48),ve=t.n(ye),ge=t(130),je=t.n(ge),Te=function(e){function n(){return Object(s.a)(this,n),Object(m.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.props,n=e.classes,t=e.units,a=e.dorms;if(!a)return i.a.createElement(r.Fragment,null,i.a.createElement(ne.a,{variant:"h6"},"Lista de preferencias"),i.a.createElement(ne.a,null,"No se ha completado la informaci\xf3n necesaria"));var o=t["d".concat(a,"Priorities")];return i.a.createElement(r.Fragment,null,i.a.createElement(fe.a,{className:n.table},i.a.createElement(he.a,null,i.a.createElement(Oe.a,null,i.a.createElement(ve.a,{component:"th"},"Prioridad"),i.a.createElement(ve.a,{component:"th"},"Unidad"))),i.a.createElement(je.a,null,o.map(function(e){return i.a.createElement(Oe.a,{key:e.id},i.a.createElement(ve.a,null,e.id+1),i.a.createElement(ve.a,null,e.unit?e.unit.id:"-"))}))))}}]),n}(r.PureComponent),_e=Object(P.withStyles)(function(e){return{}})(Te),we=Object(f.b)(function(e){var n=e.units,t=e.family.dorms;return{units:n,dorms:t}},function(e){return{}})(_e);t(292);var Ae=function(e){var n=e.children,t=e.fullWidth;return i.a.createElement("div",{className:"container ".concat(t?"fullWidth":"")},n)},Ce=Ae;Ae.defaultProps={fullWidth:!1};var Ne=function(e,n){var t=document.createElement("a");t.setAttribute("href","data:application/json;charset=utf-8,".concat(encodeURIComponent(n))),t.setAttribute("download","".concat(e,".json")),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},Ie=t(131),Pe=t.n(Ie),Fe=t(132),Se=t.n(Fe),ke=t(133),xe=t.n(ke),Le=t(76),Re=t.n(Le),Me=t(78),De=t.n(Me),Ye=t(136),Ue=t.n(Ye),He=t(137),Ge=t.n(He),Be=t(79),Ve=t.n(Be),We=t(134),Je=t.n(We),Xe=t(135),ze=t.n(Xe),$e=function(e){function n(){var e,t;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(m.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={anchorEl:null},t.closeOptionsMenu=function(){t.setState({anchorEl:null})},t.openOptionsMenu=function(e){t.setState({anchorEl:e.currentTarget})},t.export=function(){var e=t.props,n=e.family,a=e.units;Ne("".concat(n.id),JSON.stringify({family:n,units:a},null,2)),t.closeOptionsMenu()},t.handleTabChange=function(e,n){(0,t.props.changeTab)(n)},t}return Object(p.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){document.title="Preferencias MTAV"}},{key:"render",value:function(){var e=this,n=this.state,t=n.anchorEl,a=(n.tab,this.props),r=a.classes,o=a.family,c=a.openFamilyFrom,l=a.importData,s=a.openTab,u=a.saveData;return i.a.createElement("div",{className:r.root},i.a.createElement(Se.a,{position:"static"},i.a.createElement(xe.a,null,i.a.createElement(Je.a,{fontSize:"large",className:r.menuButton}),i.a.createElement(ne.a,{variant:"h6",color:"inherit",className:r.grow},"Preferencias MTAV"),i.a.createElement(De.a,{title:"Editar informaci\xf3n","aria-label":"Editar informaci\xf3n",className:r.info},i.a.createElement(x.a,{color:"inherit",onClick:c},"#".concat(o.id," ").concat(o.name," - ").concat(o.dorms,"D"))),i.a.createElement(De.a,{title:"Opciones","aria-label":"Opciones"},i.a.createElement(Re.a,{color:"inherit",onClick:this.openOptionsMenu},i.a.createElement(ze.a,{color:"inherit"}))),i.a.createElement(Ue.a,{id:"simple-menu",anchorEl:t,open:Boolean(t),onClose:this.closeOptionsMenu},i.a.createElement(ae.a,{className:r.infoNested,onClick:function(){c(),e.closeOptionsMenu()}},"#".concat(o.id," ").concat(o.name," - ").concat(o.dorms,"D")),i.a.createElement(ae.a,{onClick:function(){u(),e.closeOptionsMenu()}},"Guardar"),i.a.createElement(Pe.a,{output:"JSON",onComplete:function(n){l(n),e.closeOptionsMenu()}},i.a.createElement(ae.a,null,"Importar")),i.a.createElement(ae.a,{onClick:this.export},"Exportar"))),i.a.createElement(Ge.a,{value:s,onChange:this.handleTabChange,className:r.tabs},i.a.createElement(Ve.a,{label:"Selecci\xf3n"}),i.a.createElement(Ve.a,{label:"Lista"}))))}}]),n}(r.PureComponent),qe=Object(P.withStyles)(function(e){var n,t;return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginRight:20},tabs:Object(l.a)({},e.breakpoints.up("md"),{display:"none"}),info:(n={},Object(l.a)(n,e.breakpoints.down("md"),{display:"none"}),Object(l.a)(n,e.breakpoints.up("md"),{display:"flex"}),n),infoNested:(t={},Object(l.a)(t,e.breakpoints.down("md"),{display:"flex"}),Object(l.a)(t,e.breakpoints.up("md"),{display:"none"}),t)}})($e),Ke=Object(f.b)(function(e){var n=e.family,t=e.units,a=e.openTab;return{family:n,units:t,openTab:a}},function(e){return{openFamilyFrom:function(){return e({type:I.FAMILY_FORM_OPEN,payload:!0})},importData:function(n){return e({type:I.IMPORT_FAMILY_DATA,payload:n})},changeTab:function(n){return e({type:I.OPEN_TAB_CHANGED,payload:n})},saveData:function(){return e({type:I.SAVE_FULL_STATE})}}})(qe);var Qe=t(31),Ze=t.n(Qe),en=function(e){function n(){return Object(s.a)(this,n),Object(m.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initAppState()}},{key:"render",value:function(){var e=this.props,n=e.classes,t=e.openTab;return i.a.createElement(r.Fragment,null,i.a.createElement(Ke,null),i.a.createElement(Ce,{className:"app-wrapper"},i.a.createElement(Ze.a,{container:!0,spacing:24,className:n.xs},i.a.createElement(Ze.a,{item:!0,xs:12},0===t&&i.a.createElement(me,null)),i.a.createElement(Ze.a,{item:!0,xs:12},1===t&&i.a.createElement(we,null))),i.a.createElement(Ze.a,{container:!0,spacing:24,className:n.md},i.a.createElement(Ze.a,{item:!0,xs:9},i.a.createElement(me,null)),i.a.createElement(Ze.a,{item:!0,xs:3},i.a.createElement(we,null)))),i.a.createElement(Z,null))}}]),n}(r.PureComponent),nn=Object(P.withStyles)(function(e){var n,t;return console.log(e),{xs:(n={},Object(l.a)(n,e.breakpoints.down("md"),{display:"flex"}),Object(l.a)(n,e.breakpoints.up("md"),{display:"none"}),n),md:(t={},Object(l.a)(t,e.breakpoints.down("md"),{display:"none"}),Object(l.a)(t,e.breakpoints.up("md"),{display:"flex"}),t)}})(en),tn=Object(f.b)(function(e){return{openTab:e.openTab}},function(e){return{initAppState:function(){return e({type:I.INIT_APP_STATE})}}})(nn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(318);c.a.render(i.a.createElement(f.a,{store:N},i.a.createElement(tn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[138,2,1]]]);
//# sourceMappingURL=main.a6b0bced.chunk.js.map