(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,n){e.exports=n(321)},144:function(e,t,n){},293:function(e,t,n){},321:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(25),l=n.n(o),c=(n(144),n(17)),u=n(15),s=n(20),m=n(23),d=n(21),p=n(24),f=n(22),E=n(56),b=n(58),h={units:{d2:[101,102,104,105,106,107,201,202,204,205,206,207,301,302,304,305,306,307,401,402,404,405,406,407,501,502,503,601,602,603,701,702,703,801,802,803,901,902,903,1001,1002,1003],d3:[103,203,303,403],d4:[],total:46}},y=Object(b.a)({},h),O=function e(t,n,a){Object(u.a)(this,e),this.id=t,this.dorms="d".concat(n),this.priority=a||0===a?a:-1},v=function e(t,n,a){Object(u.a)(this,e),this.id=t,this.dorms="d".concat(n),this.unit=a},g={family:{id:"",name:"",dorms:0},familyForm:{complete:!0,open:!1},units:(a=y.units,{d2:a.d2.map(function(e){return new O(e,2)}),d2Priorities:a.d2.map(function(e,t){return new v(t,2)}),d3:a.d3.map(function(e){return new O(e,3)}),d3Priorities:a.d3.map(function(e,t){return new v(t,3)}),d4:a.d4.map(function(e){return new O(e,4)}),d4Priorities:a.d4.map(function(e,t){return new v(t,4)}),total:a.total,valid:j(a)}),openTab:0};function j(e){return e.d2.length+e.d3.length+e.d4.length===e.total?{status:!0,message:null}:{status:!1,message:"La cantidad de apartamentos no coincide con el total declarado."}}var I={INIT_APP_STATE:function(e){var t=function(){var e={id:"",name:"",dorms:0};try{var t=JSON.parse(localStorage.getItem("FAMILY_INFO"));return t||e}catch(n){return console.error(n),e}}(),n=t.id,a=t.name,r=t.dorms;e.family=Object.assign({},e.family,{id:n,name:a,dorms:r});var i=_(e),o=!i;return e.familyForm=Object.assign({},e.familyForm,{complete:i,open:o}),e},PATCH_FAMILY:function(e,t){e.family=Object.assign({},e.family,t);var n=_(e);return e.familyForm=Object.assign({},e.familyForm,{complete:n}),e},FAMILY_FORM_OPEN:function(e,t){return e.familyForm=Object.assign({},e.familyForm,{open:t}),e},UNIT_PRIORITY_CHANGE:function(e,t){var n,a,r=t.unit,i=t.priority,o=e.units[r.dorms].map(function(e){return e.id===r.id?((a=new O(r.id,null,i)).dorms=r.dorms,a):e}),l=e.units["".concat(a.dorms,"Priorities")].map(function(e){if(e.id===i){var t=new v(e.id,null,a);return t.dorms=e.dorms,t}return e});return e.units=Object.assign({},e.units,(n={},Object(c.a)(n,r.dorms,o),Object(c.a)(n,"".concat(r.dorms,"Priorities"),l),n)),e},RELEASE_PRIORITY:function(e,t){var n,a=e.units[t.dorms].map(function(e){if(e.id===t.id){var n=new O(t.id,null,-1);return n.dorms=t.dorms,n}return e}),r=e.units["".concat(t.dorms,"Priorities")].map(function(e){if(e.id===t.priority){var n=new v(e.id,null,null);return n.dorms=e.dorms,n}return e});return e.units=Object.assign({},e.units,(n={},Object(c.a)(n,t.dorms,a),Object(c.a)(n,"".concat(t.dorms,"Priorities"),r),n)),e},IMPORT_FAMILY_DATA:function(e,t){return e=Object(b.a)({},e,t,{familyForm:{complete:!0,open:!0}})},OPEN_TAB_CHANGED:function(e,t){return e.openTab=t,e}};function _(e){return!!(e.family.id&&e.family.name&&e.family.dorms)}var T=Object(E.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,n=I[t.type];return n?n(Object.assign({},e),t.payload):e},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),A={INIT_APP_STATE:"INIT_APP_STATE",PATCH_FAMILY:"PATCH_FAMILY",FAMILY_FORM_OPEN:"FAMILY_FORM_OPEN",UNIT_PRIORITY_CHANGE:"UNIT_PRIORITY_CHANGE",RELEASE_PRIORITY:"RELEASE_PRIORITY",IMPORT_FAMILY_DATA:"IMPORT_FAMILY_DATA",OPEN_TAB_CHANGED:"OPEN_TAB_CHANGED"},N=n(19),w=n(37),P=n.n(w),F=n(45),C=n.n(F),x=n(122),R=n.n(x),S=n(123),M=n.n(S),k=n(124),L=n.n(k),Y=n(125),D=n.n(Y),G=n(127),H=n.n(G),B=n(126),U=n.n(B),W=n(60),J=n.n(W),X=n(61),V=n.n(X),z=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).save=function(){var e=n.props.family;localStorage.setItem("FAMILY_INFO",JSON.stringify(e)),n.props.onClose()},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.family,a=n.id,r=n.name,o=n.dorms,l=e.open,c=e.complete,u=e.onChange;return i.a.createElement(R.a,{className:"family-wrapper",open:l||!c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(M.a,{id:"alert-dialog-title"},"Familia"),i.a.createElement(L.a,null,i.a.createElement(D.a,{id:"alert-dialog-description"},"Ingrese los datos solicitados."),i.a.createElement(P.a,{id:"id",name:"id",label:"N\xba",value:a,onChange:u,margin:"normal",variant:"outlined",type:"number",fullWidth:!0}),i.a.createElement(P.a,{id:"name",name:"name",label:"Nombre",value:r,onChange:u,margin:"normal",variant:"outlined",fullWidth:!0}),i.a.createElement(U.a,{"aria-label":"Cantidad de dormitorios",name:"dorms",className:t.group,value:o.toString(),onChange:u},i.a.createElement(J.a,{value:"2",control:i.a.createElement(V.a,null),label:"2 dormitorios"}),i.a.createElement(J.a,{value:"3",control:i.a.createElement(V.a,null),label:"3 dormitorios"}),i.a.createElement(J.a,{value:"4",control:i.a.createElement(V.a,null),label:"4 dormitorios",disabled:!0}))),i.a.createElement(H.a,null,i.a.createElement(C.a,{variant:"contained",color:"primary",onClick:this.save,autoFocus:!0},"Guardar")))}}]),t}(r.PureComponent),$=Object(N.withStyles)(function(e){return{group:{margin:"".concat(e.spacing.unit,"px 0")}}})(z),q=Object(f.b)(function(e){var t=e.family,n=e.familyForm,a=n.open,r=n.complete;return{family:t,open:a,complete:r}},function(e){return{onChange:function(t){var n=t.currentTarget.getAttribute("name"),a=t.currentTarget.value,r=Object(c.a)({},n,a);"dorms"===n&&(r.dorms=parseInt(r.dorms,10)),e({type:A.PATCH_FAMILY,payload:r})},onClose:function(){return e({type:A.FAMILY_FORM_OPEN,payload:!1})}}})($);var K=n(18),Q=n.n(K),Z=n(46),ee=n.n(Z),te=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.unit,a=e.units,r=e.onChange,o=e.onReset,l=a["".concat(n.dorms,"Priorities")].filter(function(e){return!e.unit}),c=-1!==n.priority;return i.a.createElement("div",{className:t.unit},i.a.createElement(Q.a,{variant:"h6",align:"center",color:"primary"},n.id),c?i.a.createElement(P.a,{label:"Prioridad",variant:"outlined",margin:"normal",value:n.priority+1,className:t.textField,type:"search",onChange:o(n)}):i.a.createElement(P.a,{select:!0,label:"Prioridad",value:-1,onChange:r(n),margin:"normal",variant:"outlined",className:t.textField},l.map(function(e){return i.a.createElement(ee.a,{key:e.id,value:e.id},e.id+1)})))}}]),t}(r.PureComponent),ne=Object(N.withStyles)(function(e){return{unit:{position:"relative",width:100,height:100,backgroundSolor:"#FFF",boxShadow:"0 5px 20px -5px rgba(0, 0, 0, .5)",margin:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:10,flexShrink:0,padding:10},textField:{width:80,marginTop:10,marginBottom:0}}})(te),ae=Object(f.b)(function(e){return{units:e.units}},function(e){return{onChange:function(t){return function(n){var a={unit:t,priority:n.target.value};e({type:A.UNIT_PRIORITY_CHANGE,payload:a})}},onReset:function(t){return function(){return e({type:A.RELEASE_PRIORITY,payload:t})}}}})(ne);var re=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.units,a=e.floor;return window.units=n,i.a.createElement("div",{id:"floor-".concat(a),className:t.floor},a>0&&i.a.createElement(Q.a,{variant:"h6",color:"secondary",className:t.title},a/100),n.map(function(e){return i.a.createElement(ae,{key:e.id,unit:e})}))}}]),t}(r.PureComponent),ie=Object(N.withStyles)(function(e){return{floor:{width:"100%",display:"flex",flexWrap:"wrap"},title:{width:40,height:40,borderRadius:20,display:"flex",justifyContent:"center",alignItems:"center",margin:10,boxShadow:"0 5px 20px -5px rgba(0, 0, 0, .5)"}}})(re);var oe=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.units),n=e.dorms;if(!n)return i.a.createElement(r.Fragment,null,i.a.createElement(Q.a,{variant:"h6"},"Selecci\xf3n de preferencias"),i.a.createElement(Q.a,null,"No se ha completado la informaci\xf3n necesaria"));var a=function(e){var t=e.slice(),n={};for(;t.length;){var a=t.splice(0,1)[0],r=ue(0,100,a.id);n[r]||(n[r]=[]),n[r].push(a)}return n}(t["d".concat(n)]),o=Object.keys(a);return i.a.createElement(r.Fragment,null,i.a.createElement(ie,{units:[],floor:"-100"}),o.reverse().map(function(e){return i.a.createElement(ie,{key:e,units:a[e],floor:e})}))}}]),t}(r.PureComponent),le=Object(N.withStyles)(function(e){return{}})(oe),ce=Object(f.b)(function(e){var t=e.units,n=e.family.dorms;return{units:t,dorms:n}},function(e){return{}})(le);function ue(e,t,n){return n<t?e:ue(t,t+100,n)}var se=n(128),me=n.n(se),de=n(129),pe=n.n(de),fe=n(79),Ee=n.n(fe),be=n(47),he=n.n(be),ye=n(130),Oe=n.n(ye),ve=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.units,a=e.dorms;if(!a)return i.a.createElement(r.Fragment,null,i.a.createElement(Q.a,{variant:"h6"},"Lista de preferencias"),i.a.createElement(Q.a,null,"No se ha completado la informaci\xf3n necesaria"));var o=n["d".concat(a,"Priorities")];return i.a.createElement(r.Fragment,null,i.a.createElement(me.a,{className:t.table},i.a.createElement(pe.a,null,i.a.createElement(Ee.a,null,i.a.createElement(he.a,{component:"th"},"Prioridad"),i.a.createElement(he.a,{component:"th"},"Unidad"))),i.a.createElement(Oe.a,null,o.map(function(e){return i.a.createElement(Ee.a,{key:e.id},i.a.createElement(he.a,null,e.id+1),i.a.createElement(he.a,null,e.unit?e.unit.id:"-"))}))))}}]),t}(r.PureComponent),ge=Object(N.withStyles)(function(e){return{}})(ve),je=Object(f.b)(function(e){var t=e.units,n=e.family.dorms;return{units:t,dorms:n}},function(e){return{}})(ge);n(293);var Ie=function(e){var t=e.children,n=e.fullWidth;return i.a.createElement("div",{className:"container ".concat(n?"fullWidth":"")},t)},_e=Ie;Ie.defaultProps={fullWidth:!1};var Te=function(e,t){var n=document.createElement("a");n.setAttribute("href","data:application/json;charset=utf-8,".concat(encodeURIComponent(t))),n.setAttribute("download","".concat(e,".json")),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},Ae=n(131),Ne=n.n(Ae),we=n(132),Pe=n.n(we),Fe=n(133),Ce=n.n(Fe),xe=n(59),Re=n.n(xe),Se=n(62),Me=n.n(Se),ke=n(136),Le=n.n(ke),Ye=n(138),De=n.n(Ye),Ge=n(80),He=n.n(Ge),Be=n(134),Ue=n.n(Be),We=n(137),Je=n.n(We),Xe=n(135),Ve=n.n(Xe),ze=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},n.closeImportExportMenu=function(){n.setState({anchorEl:null})},n.openImportExportMenu=function(e){n.setState({anchorEl:e.currentTarget})},n.export=function(){var e=n.props,t=e.family,a=e.units;Te("".concat(t.id),JSON.stringify({family:t,units:a},null,2)),n.closeImportExportMenu()},n.handleTabChange=function(e,t){(0,n.props.changeTab)(t)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.anchorEl,a=(t.tab,this.props),o=a.classes,l=a.family,c=a.openFamilyFrom,u=a.importData,s=a.openTab;return i.a.createElement("div",{className:o.root},i.a.createElement(Pe.a,{position:"static"},i.a.createElement(Ce.a,null,i.a.createElement(Ue.a,{fontSize:"large",className:o.menuButton}),i.a.createElement(Q.a,{variant:"h6",color:"inherit",className:o.grow},"Preferencias MTAV"),i.a.createElement(r.Fragment,null,i.a.createElement(Me.a,{title:"Importar/Exportar","aria-label":"Importar/Exportar"},i.a.createElement(Re.a,{color:"inherit",onClick:this.openImportExportMenu},i.a.createElement(Ve.a,{color:"inherit"}))),i.a.createElement(Le.a,{id:"simple-menu",anchorEl:n,open:Boolean(n),onClose:this.closeImportExportMenu},i.a.createElement(Ne.a,{output:"JSON",onComplete:function(t){u(t),e.closeImportExportMenu()}},i.a.createElement(ee.a,null,"Importar")),i.a.createElement(ee.a,{onClick:this.export},"Exportar"))),i.a.createElement(Me.a,{title:"Guardar","aria-label":"Guardar"},i.a.createElement(Re.a,{color:"inherit",onClick:function(){}},i.a.createElement(Je.a,{color:"inherit"}))),i.a.createElement(Me.a,{title:"Editar informaci\xf3n","aria-label":"Editar informaci\xf3n"},i.a.createElement(C.a,{color:"inherit",onClick:c},"#".concat(l.id," ").concat(l.name," - ").concat(l.dorms,"D")))),i.a.createElement(De.a,{value:s,onChange:this.handleTabChange,className:o.tabs},i.a.createElement(He.a,{label:"Selecci\xf3n"}),i.a.createElement(He.a,{label:"Lista"}))))}}]),t}(r.PureComponent),$e=Object(N.withStyles)(function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginRight:20},tabs:Object(c.a)({},e.breakpoints.up("md"),{display:"none"})}})(ze),qe=Object(f.b)(function(e){var t=e.family,n=e.units,a=e.openTab;return{family:t,units:n,openTab:a}},function(e){return{openFamilyFrom:function(){return e({type:A.FAMILY_FORM_OPEN,payload:!0})},importData:function(t){return e({type:A.IMPORT_FAMILY_DATA,payload:t})},changeTab:function(t){return e({type:A.OPEN_TAB_CHANGED,payload:t})}}})($e);var Ke=n(30),Qe=n.n(Ke),Ze=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.initAppState()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.openTab;return i.a.createElement(r.Fragment,null,i.a.createElement(qe,null),i.a.createElement(_e,{className:"app-wrapper"},i.a.createElement(Qe.a,{container:!0,spacing:24,className:t.xs},i.a.createElement(Qe.a,{item:!0,xs:12},0===n&&i.a.createElement(ce,null)),i.a.createElement(Qe.a,{item:!0,xs:12},1===n&&i.a.createElement(je,null))),i.a.createElement(Qe.a,{container:!0,spacing:24,className:t.md},i.a.createElement(Qe.a,{item:!0,xs:9},i.a.createElement(ce,null)),i.a.createElement(Qe.a,{item:!0,xs:3},i.a.createElement(je,null)))),i.a.createElement(q,null))}}]),t}(r.PureComponent),et=Object(N.withStyles)(function(e){var t,n;return console.log(e),{xs:(t={},Object(c.a)(t,e.breakpoints.down("md"),{display:"flex"}),Object(c.a)(t,e.breakpoints.up("md"),{display:"none"}),t),md:(n={},Object(c.a)(n,e.breakpoints.down("md"),{display:"none"}),Object(c.a)(n,e.breakpoints.up("md"),{display:"flex"}),n)}})(Ze),tt=Object(f.b)(function(e){return{openTab:e.openTab}},function(e){return{initAppState:function(){return e({type:A.INIT_APP_STATE})}}})(et);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(319);l.a.render(i.a.createElement(f.a,{store:T},i.a.createElement(tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[139,2,1]]]);
//# sourceMappingURL=main.ee8dcb52.chunk.js.map